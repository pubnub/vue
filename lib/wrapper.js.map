{"version":3,"sources":["wrapper.js"],"names":["wrapAttribute","originalInstance","wrappedInstance","attributeName","wrapMethod","OriginalInstance","methodName","apply","arguments","_originInstance","_broadcast","_autoload","_listener","_data","messages","presence","status","_keepMessages","attributes_to_delegate","forEach","attribute","methods_to_delegate","method","clean","bind","getMessage","getPresence","getStatus","release","addListener","args","getOriginalInstance","subscribe","enableLoad","unsubscribe","disableLoad","ReferenceError"],"mappings":";;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;;;AAOA,SAASA,aAAT,CAAuBC,gBAAvB,EAAyCC,eAAzC,EAA0DC,aAA1D,EAAyE;AACvED,kBAAgBC,aAAhB,IAAiCF,iBAAiBE,aAAjB,CAAjC;AACD;;AAOD,SAASC,UAAT,CAAoBC,gBAApB,EAAsCH,eAAtC,EAAuDI,UAAvD,EAAmE;AACjEJ,kBAAgBI,UAAhB,IAA8B,YAAY;AACxC,WAAOD,iBAAiBC,UAAjB,EAA6BC,KAA7B,CAAmCL,eAAnC,EAAoDM,SAApD,CAAP;AACD,GAFD;AAGD;;;AAUC,kBAAYP,gBAAZ,EAA8B;AAAA;;AAAA;;AAC5B,SAAKQ,eAAL,GAAuBR,gBAAvB;AACA,SAAKS,UAAL,GAAkB,yBAAlB;AACA,SAAKC,SAAL,GAAiB,uBAAaV,gBAAb,CAAjB;AACA,SAAKW,SAAL,GAAiB,EAAjB;AACA,SAAKC,KAAL,GAAa,EAAEC,UAAU,EAAZ,EAAgBC,UAAU,EAA1B,EAA8BC,QAAQ,EAAtC,EAAb;AACA,SAAKC,aAAL,GAAqB,EAArB;;AAEA,qBAAOC,sBAAP,CAA8BC,OAA9B,CAAsC,UAACC,SAAD,EAAe;AACnDpB,oBAAcC,gBAAd,EAAgC,KAAhC,EAAsCmB,SAAtC;AACD,KAFD;;AAIA,qBAAOC,mBAAP,CAA2BF,OAA3B,CAAmC,UAACG,MAAD,EAAY;AAC7ClB,iBAAWH,gBAAX,EAA6B,KAA7B,EAAmCqB,MAAnC;AACD,KAFD;;AAIA,SAAKC,KAAL,GAAa,eAAMC,IAAN,CAAW,IAAX,CAAb;AACA,SAAKC,UAAL,GAAkB,oBAAWD,IAAX,CAAgB,IAAhB,CAAlB;AACA,SAAKE,WAAL,GAAmB,qBAAYF,IAAZ,CAAiB,IAAjB,CAAnB;AACA,SAAKG,SAAL,GAAiB,mBAAUH,IAAV,CAAe,IAAf,CAAjB;AACA,SAAKI,OAAL,GAAe,iBAAQJ,IAAR,CAAa,IAAb,CAAf;;AAEA,SAAKK,WAAL,CAAiB,KAAKjB,SAAtB;AACD;;;;8BAESkB,I,EAAM;AACd,WAAKC,mBAAL,GAA2BC,SAA3B,CAAqCF,IAArC;AACA,WAAKnB,SAAL,CAAesB,UAAf,CAA0BH,IAA1B;AACD;;;gCAEWA,I,EAAM;AAChB,WAAKC,mBAAL,GAA2BG,WAA3B,CAAuCJ,IAAvC;AACA,WAAKnB,SAAL,CAAewB,WAAf,CAA2BL,IAA3B;AACD;;;0CAEqB;AACpB,UAAI,KAAKrB,eAAT,EAA0B;AACxB,eAAO,KAAKA,eAAZ;AACD,OAFD,MAEO;AACL,cAAM,IAAI2B,cAAJ,CAAmB,gDAAnB,CAAN;AACD;AACF","file":"wrapper.js","sourcesContent":["import { clean, getMessage, getPresence, getStatus, release } from './modules';\nimport Broadcast from './broadcast';\nimport Autoload from './autoload';\nimport config from '../config.json';\n\n/**\n * Wrap a PubNub's attributes\n *\n * @param {string} attributeName\n */\nfunction wrapAttribute(originalInstance, wrappedInstance, attributeName) {\n  wrappedInstance[attributeName] = originalInstance[attributeName];\n}\n\n/**\n * Wrap a PubNub's methods\n *\n * @param methodName\n */\nfunction wrapMethod(OriginalInstance, wrappedInstance, methodName) {\n  wrappedInstance[methodName] = function () {\n    return OriginalInstance[methodName].apply(wrappedInstance, arguments);\n  };\n}\n\n/**\n * Wrap the PubNubVue with PubNub\n *\n * @param originalInstance\n * @param wrappedInstance\n */\n\nexport default class {\n  constructor(originalInstance) {\n    this._originInstance = originalInstance;\n    this._broadcast = new Broadcast();\n    this._autoload = new Autoload(originalInstance);\n    this._listener = {};\n    this._data = { messages: {}, presence: {}, status: {} };\n    this._keepMessages = {};\n\n    config.attributes_to_delegate.forEach((attribute) => {\n      wrapAttribute(originalInstance, this, attribute);\n    });\n\n    config.methods_to_delegate.forEach((method) => {\n      wrapMethod(originalInstance, this, method);\n    });\n\n    this.clean = clean.bind(this);\n    this.getMessage = getMessage.bind(this);\n    this.getPresence = getPresence.bind(this);\n    this.getStatus = getStatus.bind(this);\n    this.release = release.bind(this);\n\n    this.addListener(this._listener);\n  }\n\n  subscribe(args) {\n    this.getOriginalInstance().subscribe(args);\n    this._autoload.enableLoad(args);\n  }\n\n  unsubscribe(args) {\n    this.getOriginalInstance().unsubscribe(args);\n    this._autoload.disableLoad(args);\n  }\n\n  getOriginalInstance() {\n    if (this._originInstance) {\n      return this._originInstance;\n    } else {\n      throw new ReferenceError('Pubnub default instance is not initialized yet');\n    }\n  }\n}\n"]}